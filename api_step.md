### API 진행 상황 (DB에 기록될 상태 값은 `이걸로` 표기)

- STEP 1 - 업로드 `UPLOADING`
    - [ ]  비디오 업로드 API: DB에 비디오 pth 등록 & pth str로 반환(혹은 다르게) **[post]**
        - 현재는 로컬 `backend/storage/videos`에 저장하여 pth 반환, GCP 업로드 코드는 주석으로 준비됨
    - [ ]  비디오 반환 API: 비디오 이름 입력 → 비디오 파일 반환 **[get]**
- STEP 2 - 분석
    - [ ]  인자 체크 및 분석 시작 API: 분석 서비스 체크해서 선택완료 후 분석버튼 클릭 → 선택한 Task들을, 데이터에 DB 저장[analysis_jobs] → 분석 및 알고리즘 진행 (비동기) **[post]**
        - 현재 구현은 백그라운드 데모 작업으로 결과를 생성하며, 실제 GPU 서버 SSH 실행 예제는 코드 내 주석으로 포함
    - [ ]  분석 확인 API: ID 입력 → 분석이 덜 끝났다면 `PROCESSING` 반환, 끝났다면 `COMPLETED` 상태이고, 분석된 클립들의 각각의 pth 반환
        - 클립에는 정확히 어떤것이 들어가는지 Response body로 저장 **[get]**
        - 클립 반환, 같은 영상안의 클립 자료들을 반환 → DB에서 현재 분석된 영상과 같은 영상 ID를 가진 Clip을 가져온다
        - 자세한 과정
            - **클라이언트가 POST로 분석을 요청한다.**
                
                이 요청은 task를 생성하고 Celery 비동기 작업을 시작시키는 역할만 한다.
                
            - **GPU 서버(Celery 워커)가 분석을 수행한다.**
                
                분석이 끝나면 결과를 DB에 쓰지 않고, 결과 JSON 파일만 생성한 뒤 작업을 종료한다.
                
            - **API 서버가 결과 파일을 polling으로 감지한다.**
                
                파일이 발견되면 API 서버가 DB 트랜잭션을 시작한다.
                
            - **API 서버가 하나의 트랜잭션으로 DB를 갱신한다.**
                - analysis 테이블에 clip 개수만큼 결과를 INSERT
                - task 테이블의 status를 COMPLETED로 UPDATE
            - **클라이언트는 GET API로 상태를 polling한다.**
                
                task가 COMPLETED가 되면 analysis 결과를 JOIN해서 응답받는다.
                
    - [ ]  클립 정보 수정 API: 필요하지 않은 or 정확하지 않은 클립은 DB에서 삭제하기 **[patch]**
        - 클립 상세보기에서 내부 내용 수정 후 ‘수정하기’버튼 클릭시 수정 가능하게 변경
        - 실제로 변경 후, ‘수정완료’ 버튼시 patch가 동작
    - [ ]  클립 구간 삭제 API: 필요하지 않은 or 정확하지 않은 클립은 DB에서 삭제하기 **[delete]**
        - 클립 상세보기전, 각 클립 우측상단에 X표시 클릭시
- STEP 3 - 신고
    - [ ]  신고 전송 API: ‘신고 전송’버튼 클릭시 **[post]**
        - 신고전송 버튼 클릭시 DB에 저장
